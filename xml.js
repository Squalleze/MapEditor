let xml = '<C><P D="fond-niveau.png,0,0;" G="0,9.4" Ca="" F="0" /><Z><S><S H="71" L="800" Y="375" X="401" P="0,0,0.3,0.2,0,0,0,0" T="12" /><S X="418" L="10" Y="272" H="55" P="0,0,0,0,-22,0,0,0" T="12" /><S H="20" L="130" Y="290" X="169" P="1,0,0,0,0,0,0,0" T="12" /><S X="165" L="160" Y="330" H="20" P="1,0,0.3,0,0,0,0,0" T="12" /><S X="175" L="140" Y="310" H="20" P="1,160,0.3,0,0,0,0,0" T="12" /><S H="70" L="10" Y="261" X="447" P="0,0,0,0,15,0,0,0" T="12" /><S X="484" L="15" Y="133" H="10" P="0,0,0.3,0.2,0,0,0,0" T="13" /><S X="333" L="16" Y="244" H="60" P="0,0,0.3,0.2,50,0,0,0" T="12" /><S H="145" L="10" Y="278" X="343" P="0,0,0,0,-116,0,0,0" T="12" /><S H="1600" X="30" L="40" Y="-404" c="3" P="0,0,0,0,0,0,0,0" T="12" /><S H="60" L="12" Y="254" X="307" P="0,0,0.3,0.2,52,0,0,0" T="12" /><S X="646" L="20" Y="225" H="10" P="0,0,0.3,0.2,2,0,0,0" T="12" /><S H="30" L="25" Y="255" X="668" P="0,0,0.3,0.2,2,0,0,0" T="12" /><S H="30" L="50" Y="329" X="724" P="0,0,0.3,0.2,-88,0,0,0" T="12" /><S H="89" L="40" Y="81" X="60" P="0,0,0.3,0.2,-10,0,0,0" T="12" /><S H="10" L="45" Y="321" X="344" P="0,0,0.3,0.2,0,0,0,0" T="13" /><S H="60" L="16" Y="262" X="336" P="0,0,0.3,0.2,20,0,0,0" T="12" /><S X="348" L="12" Y="162" H="10" P="0,0,0,0,0,0,0,0" T="12" /><S H="10" L="80" Y="81" X="193" P="0,0,8,0,-10,0,0,0" T="12" /><S X="185" L="95" Y="114" H="10" P="0,0,8,0,13,0,0,0" T="12" /><S H="10" L="60" Y="104" X="134" P="0,0,8,0,-37,0,0,0" T="12" /><S X="75" L="80" Y="129" H="10" P="0,0,8,0,-12,0,0,0" T="12" /><S H="10" L="80" Y="163" X="121" P="0,0,0,0,75,0,0,0" T="12" /><S H="10" L="40" Y="129" X="184" P="0,0,8,0,53,0,0,0" T="12" /><S H="10" L="10" Y="145" X="613" P="0,0,0.3,0.2,0,0,0,0" T="13" /><S X="94" L="40" Y="101" H="40" P="0,0,0.3,0.2,-10,0,0,0" T="12" /><S X="312" L="12" Y="284" H="60" P="0,0,0.3,0.2,122,0,0,0" T="12" /><S X="34" H="10" o="331701" L="10" Y="185" P="0,0,0.3,0.2,0,0,0,0" T="13" /><S H="10" L="20" Y="239" X="656" P="0,0,0.3,0.2,52,0,0,0" T="12" /><S X="612" L="200" Y="325" H="20" P="0,0,0.3,0.2,112,0,0,0" T="12" /><S H="30" L="10" Y="265" X="684" P="0,0,0.3,0.2,-58,0,0,0" T="12" /><S X="702" L="40" Y="289" H="60" P="0,0,0.3,0.2,-78,0,0,0" T="12" /><S H="10" L="10" Y="142" X="275" P="0,0,0.3,0.2,0,0,0,0" T="13" /><S X="730" L="12" Y="176" H="10" P="0,0,8,0.2,0,0,0,0" T="13" /></S><D><DS X="430" Y="260" /><P P="0,0" X="130" T="11" Y="340" /><P P="0,0" X="193" T="11" Y="340" /><P X="132" P="0,0" T="2" Y="104" /><P X="175" P="0,0" T="2" Y="82" /><P X="220" P="0,0" T="2" Y="119" /><P X="89" P="0,0" T="2" Y="123" /><P P="0,0" X="205" T="11" Y="340" /><P P="0,0" X="115" T="11" Y="341" /><DC X="614" Y="120" /><P P="1,1" X="630" T="84" Y="337" /><P X="587" P="0,0" T="83" Y="345" /><P X="676" P="1,0" T="84" Y="340" /><P X="755" P="1,0" T="84" Y="341" /><P P="0,0" X="664" T="84" Y="343" /></D><O /><L><JD c="996535,36" P2="344,388" P1="343,6" /><JD c="996535,45" P2="482,365" P1="476,-67" /><JD c="996535,40" P2="614,421" P1="606,-56" /><JD c="996535,40" P2="273,25" P1="264,382" /><JD c="996535,45" P2="730,430" P1="737,-47" /><JD c="cccccc,5" P2="641,180" P1="646,214" /><JD c="8e5826,15" P2="319,363" P1="318,-17" /><JD c="8e5826,15" P2="510,347" P1="504,-33" /><JD c="8e5826,15" P2="586,337" P1="580,-43" /><JD c="8e5826,15" P2="757,336" P1="764,-44" /><JD c="8e5826,15" P2="757,336" P1="764,-44" /><JD c="8e5826,15" P2="240,335" P1="247,-45" /><JD c="cccccc,5" P2="573,190" P1="578,224" /><JD c="cccccc,9" P2="642,210" P1="576,193" /><JD c="cccccc,5" P2="641,180" P1="573,190" /><JD c="cccccc,35" P2="628,197" P1="591,207" /><JD c="cccccc,5" P2="646,214" P1="578,224" /><JD c="cccccc,9" P2="639,184" P1="581,220" /><JD c="413323,35" P2="29,398" P1="32,-21" /><JD c="413323,8" P2="37,135" P1="114,117" /><JD c="413323,8" P2="114,117" P1="158,86" /><JD c="413323,8" P2="158,86" P1="227,71" /><JD c="413323,8" P2="140,100" P1="228,121" /><JD c="413323,8" P2="194,142" P1="172,109" /><JD c="413323,8" P2="-20,9" P1="21,44" /><JD c="413323,8" P2="-30,132" P1="17,153" /><JD c="548f47,101" P2="931,412" P1="-92,414" /><JD c="4c7f25,20" P2="1020,355" P1="-17,354" /><JD c="77920c,6" P2="907,342" P1="-25,342" /><JD c="331701,30" P2="484,130" P1="484,129" /><JD c="331701,20" P2="274,140" P1="274,139" /><JD c="331701,15" P2="349,160" P1="349,159" /><JD c="331701,21" P2="612,145" P1="612,144" /><JD c="000000,2,1,1" P2="408,239" P1="432,289" /><JD c="000000,2" P2="443,258" P1="441,268" /><JD c="000000,2,1,1" P2="443,258" P1="450,244" /><JD c="000000,2,1,1" P2="450,244" P1="455,230" /><JD c="000000,2,1,1" P2="455,230" P1="452,219" /><JD c="000000,2" P2="432,289" P1="436,291" /><JD c="000000,2" P2="436,291" P1="440,288" /><JD c="000000,2,1,1" P2="440,288" P1="441,268" /><JD c="000000,2,1,1" P2="415,252" P1="421,237" /><JD c="000000,2,1,1" P2="418,260" P1="430,234" /><JD c="000000,2,1,1" P2="444,220" P1="422,268" /><JD c="000000,2,1,1" P2="451,220" P1="426,276" /><JD c="000000,2" P2="443,258" P1="429,283" /><JD c="000000,2" P2="440,275" P1="433,289" /><JD c="000000,2" P2="416,230" P1="411,245" /><JD c="000000,2" P2="440,287" P1="412,232" /><JD c="000000,2" P2="440,269" P1="420,228" /><JD c="000000,2" P2="444,255" P1="430,224" /><JD c="000000,2" P2="449,245" P1="439,219" /><JD c="000000,2,1,1" P2="453,234" P1="446,218" /><JD c="331701,25" P2="729,176" P1="729,175" /><JD c="ffffff,7" P2="45,76" P1="40,80" /><JD c="ffffff,3" P2="40,78" P1="43,72" /><JD c="ffffff,3" P2="37,82" P1="40,72" /><JD c="ffffff,2" P2="40,75" P1="40,74" /><JD c="d8a934,6" P2="301,282" P1="299,274" /><JD c="a0420d,12" P2="725,290" P1="716,289" /><JD c="a0420d,4" P2="729,294" P1="733,277" /><JD c="a0420d,8" P2="723,288" P1="730,279" /><JD c="a0420d,5" P2="691,267" P1="717,274" /><JD c="a0420d,4" P2="731,275" P1="733,277" /><JD c="a0420d,2" P2="732,274" P1="732,273" /><JD c="981a0e,16" P2="50,69" P1="50,68" /><JD c="981a0e,8" P2="46,67" P1="50,54" /><JD c="981a0e,8" P2="50,44" P1="50,54" /><JD c="981a0e,8" P2="50,44" P1="54,37" /><JD c="981a0e,8" P2="54,49" P1="57,43" /><JD c="981a0e,15" P2="52,56" P1="61,69" /><JD c="981a0e,8" P2="55,58" P1="54,41" /><JD c="981a0e,4" P2="47,63" P1="43,44" /><JD c="981a0e,2" P2="42,44" P1="42,40" /><JD c="981a0e,2" P2="44,44" P1="42,40" /><JD c="981a0e,10" P2="55,38" P1="55,37" /><JD c="981a0e,4" P2="57,35" P1="65,46" /><JD c="981a0e,4" P2="57,45" P1="65,46" /><JD c="a2140c,5" P2="54,75" P1="55,87" /><JD c="b36b14,7" P2="79,121" P1="73,113" /><JD c="4a5fa7,10" P2="53,91" P1="54,109" /><JD c="4a5fa7,9" P2="54,110" P1="60,120" /><JD c="4a5fa7,8" P2="62,114" P1="64,110" /><JD c="4a5fa7,6" P2="73,113" P1="60,119" /><JD c="4a5fa7,5" P2="52,93" P1="33,89" /><JD c="4a5fa7,5" P2="33,89" P1="37,83" /><JD c="4a5fa7,5" P2="60,91" P1="88,84" /><JD c="4a5fa7,5" P2="67,89" P1="60,87" /><JD c="ffffff,10" P2="63,107" P1="59,91" /><JPL c="e8e8e8,3" P2="51,85" P4="51,84" P3="51,84" P1="51,83" /><JPL c="e8e8e8,3" P2="52,85" P4="51,85" P3="51,85" P1="51,84" /><JPL c="e8e8e8,3" P2="52,87" P4="52,87" P3="52,86" P1="52,85" /><JPL c="e8e8e8,3" P2="54,87" P4="53,88" P3="53,87" P1="52,86" /><JPL c="e8e8e8,3" P2="55,88" P4="55,87" P3="54,88" P1="54,87" /><JPL c="e8e8e8,3" P2="57,88" P4="57,87" P3="56,87" P1="55,88" /><JPL c="e8e8e8,3" P2="58,87" P4="59,86" P3="58,87" P1="57,87" /><JD c="ffffff,4" P2="88,86" P1="89,82" /><JD c="ffffff,3" P2="99,91" P1="94,85" /><JD c="ffffff,3" P2="99,91" P1="104,85" /><JD c="ffffff,3" P2="103,90" P1="108,85" /><JD c="ffffff,3" P2="112,93" P1="107,88" /><JD c="ffffff,3" P2="104,77" P1="101,81" /><JD c="ffffff,3" P2="101,81" P1="90,82" /><JD c="f5f5f5,3" P2="94,85" P1="89,84" /><JD c="ffffff,7" P2="99,87" P1="96,84" /><JD c="000000,2" P2="129,187" P1="106,90" /><JD c="637ec9,15" P2="131,194" P1="131,193" /><JD c="b36b14,7" P2="61,125" P1="71,123" /><JD c="6b7888,3" P2="396,245" P1="406,239" /><JD c="6b7888,3" P2="406,239" P1="413,230" /><JD c="6b7888,3,1,1" P2="407,239" P1="415,239" /><JD c="6b7888,3,1,1" P2="416,239" P1="438,230" /><JD c="6b7888,3,1,1" P2="438,230" P1="449,223" /><JD c="6b7888,3,1,1" P2="449,223" P1="451,218" /><JD c="6b7888,3,1,1" P2="450,218" P1="443,218" /><JD c="6b7888,3" P2="443,218" P1="413,230" /><JD c="2657c9,10,0.6" P2="132,194" P1="132,193" /><JD c="cb8228,5" P2="58,74" P1="63,74" /><JD c="cb8228,5" P2="68,71" P1="63,74" /><JD c="cb8228,5" P2="64,70" P1="68,71" /><JD c="cb8228,5" P2="64,70" P1="58,73" /><JD c="cb8228,5" P2="50,72" P1="58,73" /><JD c="cb8228,8" P2="50,75" P1="50,74" /><JD c="cb8228,4" P2="62,75" P1="50,76" /><JD c="cb8228,2" P2="67,71" P1="67,70" /><JD c="cb8228,3" P2="67,73" P1="75,66" /><JD c="cb8228,3" P2="75,66" P1="77,59" /><JD c="cb8228,3" P2="65,71" P1="71,69" /><JD c="d98851,6" P2="349,355" P1="350,360" /><JD c="d98851,5" P2="367,352" P1="369,360" /><JD c="000000,5" P2="352,373" P1="342,380" /><JD c="000000,5" P2="372,376" P1="364,384" /><JD c="000000,3" P2="372,370" P1="374,379" /><JD c="000000,4" P2="353,369" P1="355,376" /><JD c="513f1a,7" P2="351,363" P1="352,365" /><JD c="513f1a,7" P2="370,363" P1="371,366" /><JD c="a0420d,60" P2="652,292" P1="670,289" /><JD c="a0420d,40" P2="662,302" P1="697,290" /><JD c="a0420d,30" P2="620,309" P1="646,246" /><JD c="a0420d,30" P2="679,271" P1="651,251" /><JD c="a0420d,30" P2="683,278" P1="707,284" /><JD c="a0420d,20" P2="637,256" P1="646,233" /><JD c="a0420d,20" P2="662,252" P1="647,239" /><JD c="a0420d,9" P2="718,307" P1="733,309" /><JD c="a0420d,5" P2="723,305" P1="737,307" /><JD c="000000" P2="667,262" P1="649,276" /><JD c="000000" P2="667,262" P1="673,259" /><JD c="000000" P2="673,259" P1="683,259" /><JD c="000000" P2="689,264" P1="675,269" /><JD c="000000" P2="689,264" P1="683,259" /><JD c="000000" P2="675,269" P1="662,279" /><JD c="000000" P2="662,279" P1="650,284" /><JD c="000000" P2="650,284" P1="642,282" /><JD c="000000" P2="642,282" P1="630,274" /><JD c="000000" P2="646,263" P1="639,257" /><JD c="000000" P2="646,271" P1="649,268" /><JD c="000000" P2="646,271" P1="647,274" /><JD c="000000" P2="647,274" P1="649,276" /><JD c="000000" P2="644,269" P1="647,267" /><JD c="000000" P2="644,269" P1="646,272" /><JD c="000000" P2="644,269" P1="644,266" /><JD c="000000" P2="644,266" P1="646,263" /><JD c="000000" P2="691,288" P1="685,295" /><JD c="000000" P2="692,284" P1="690,294" /><JD c="000000" P2="692,284" P1="697,277" /><JD c="000000" P2="697,277" P1="701,275" /><JD c="000000" P2="701,275" P1="724,283" /><JD c="000000" P2="730,296" P1="719,295" /><JD c="000000" P2="735,277" P1="732,271" /><JD c="000000" P2="639,223" P1="604,309" /><JD c="c0732c,20" P2="660,250" P1="654,249" /><JD c="c0732c,7" P2="649,246" P1="640,243" /><JD c="c0732c,7" P2="655,243" P1="670,245" /><JD c="631400,7" P2="667,244" P1="671,252" /><JD c="c0732c,7" P2="648,249" P1="640,243" /><JD c="000000" P2="723,282" P1="732,271" /><JD c="000000" P2="734,275" P1="731,280" /><JD c="000000" P2="733,273" P1="729,278" /><JD c="000000" P2="666,322" P1="710,306" /><JD c="000000,17" P2="710,297" P1="710,296" /><JD c="000000" P2="717,312" P1="735,313" /><JD c="000000" P2="735,313" P1="740,308" /><JD c="000000" P2="740,308" P1="739,305" /><JD c="000000" P2="739,305" P1="723,302" /><JD c="000000" P2="737,311" P1="731,310" /><JD c="000000" P2="739,308" P1="733,307" /><JD c="000000" P2="722,282" P1="718,271" /><JD c="000000" P2="718,271" P1="692,265" /><JD c="000000" P2="692,265" P1="691,262" /><JD c="000000" P2="658,236" P1="654,227" /><JD c="000000" P2="658,236" P1="691,262" /><JD c="000000" P2="654,227" P1="651,224" /><JD c="000000" P2="730,296" P1="735,277" /><JD c="631400,7" P2="667,244" P1="678,244" /><JD c="631400,7" P2="678,244" P1="671,252" /><JD c="a0420d,16" P2="710,298" P1="710,297" /><JD c="000000" P2="702,295" P1="702,303" /><JD c="a0420d,14" P2="716,302" P1="711,297" /><JD c="000000" P2="707,303" P1="717,312" /><JD c="000000" P2="721,297" P1="723,302" /><JD c="000000" P2="715,290" P1="721,297" /><JD c="8c4d25,6" P2="56,67" P1="55,63" /><JD c="8c4d25,6" P2="62,65" P1="61,61" /><JD c="000000" P2="51,73" P1="49,75" /><JD c="000000" P2="55,56" P1="51,58" /><JD c="000000" P2="59,56" P1="57,56" /><JD c="bc7214,7" P2="62,125" P1="72,125" /><JD c="bc7214,7" P2="77,113" P1="71,109" /><JD c="bc7214,7" P2="78,114" P1="80,121" /><JD c="13553c,44" P2="333,273" P1="327,323" /><JD c="13553c,44" P2="354,337" P1="328,324" /><JD c="13553c,44" P2="355,337" P1="372,326" /><JD c="13553c,44" P2="372,326" P1="333,270" /><JD c="d8a934,20" P2="331,261" P1="327,285" /><JD c="d8a934,20" P2="353,286" P1="328,286" /><JD c="d8a934,20" P2="353,284" P1="332,255" /><JD c="d8a934,5" P2="319,295" P1="322,269" /><JD c="d8a934,5" P2="347,292" P1="319,295" /><JD c="13553c,6" P2="337,287" P1="341,257" /><JD c="6a5b28,5" P2="394,246" P1="279,304" /><JD c="d98851,13" P2="303,272" P1="288,266" /><JD c="d98851,10" P2="285,266" P1="302,254" /><JD c="d98851,10" P2="302,255" P1="302,254" /><JD c="d98851,8" P2="304,253" P1="305,245" /><JD c="d98851,3" P2="303,243" P1="312,234" /><JD c="d98851,3" P2="306,244" P1="313,237" /><JD c="000000" P2="50,74" P1="54,77" /><JD c="000000" P2="54,77" P1="61,77" /><JD c="000000" P2="61,77" P1="67,75" /><JD c="d98851,20" P2="317,260" P1="330,259" /><JD c="d98851,20" P2="330,259" P1="337,252" /><JD c="d98851,15,0.9" P2="339,253" P1="342,238" /><JD c="d98851,12" P2="342,241" P1="346,231" /><JD c="d98851,14" P2="345,232" P1="316,248" /><JD c="d98851,12" P2="313,245" P1="343,232" /><JD c="fff9f5,5" P2="329,238" P1="333,236" /><JD c="fff9f5,4" P2="325,235" P1="329,233" /><JD c="000000,3" P2="333,236" P1="333,235" /><JD c="000000,3" P2="329,233" P1="329,232" /><JD c="d98851,13" P2="342,293" P1="348,281" /><JD c="d98851,8" P2="341,295" P1="322,287" /><JD c="d98851,3" P2="320,288" P1="312,282" /><JD c="d98851,3" P2="321,286" P1="317,282" /><JD c="d98851,3" P2="322,285" P1="319,280" /><JD c="d98851,3" P2="324,285" P1="321,279" /><JD c="d98851,8" P2="344,291" P1="322,287" /><JD c="d8a934,15" P2="352,281" P1="349,278" /><JD c="6a5b28,5" P2="394,246" P1="329,279" /><JD c="d8a934,5" P2="307,283" P1="309,271" /><JD c="d8a934,5" P2="309,271" P1="303,267" /><JD c="d8a934,5" P2="301,284" P1="301,283" /><JD c="d8a934,5" P2="301,283" P1="306,283" /><JD c="d8a934,5" P2="305,282" P1="305,270" /><JD c="d8a934,5" P2="305,271" P1="305,270" /><JD c="000000,5" P2="313,244" P1="313,243" /><JD c="000000" P2="335,233" P1="337,236" /><JD c="000000" P2="333,231" P1="334,232" /><JD c="bb7758,5" P2="317,237" P1="318,233" /><JD c="bb7758,5" P2="317,237" P1="319,239" /><JD c="000000,20" P2="320,258" P1="320,257" /><JD c="d98851,21" P2="320,257" P1="320,256" /><JD c="000000,8" P2="337,248" P1="337,247" /><JD c="d98851,7" P2="337,248" P1="337,247" /><JD c="d98851,7" P2="335,244" P1="334,248" /><JD c="145540,8" P2="350,225" P1="356,221" /><JPL c="145540,5" P2="347,224" P4="346,222" P3="345,221" P1="343,220" /><JPL c="145540,5" P2="349,227" P4="348,226" P3="347,225" P1="347,224" /><JPL c="145540,5" P2="354,229" P4="352,228" P3="350,227" P1="349,227" /><JPL c="145540,5" P2="354,229" P4="354,229" P3="357,229" P1="354,229" /><JPL c="145540,2" P2="364,220" P4="366,220" P3="367,221" P1="367,220" /><JPL c="145540,2" P2="359,221" P4="361,221" P3="363,221" P1="364,220" /><JPL c="145540,2" P2="355,222" P4="356,222" P3="358,222" P1="359,221" /><JPL c="145540,2" P2="355,222" P4="355,222" P3="355,223" P1="355,222" /><JD c="bd732a,3" P2="645,227" P1="640,223" /><JD c="bd732a,3" P2="650,226" P1="643,222" /><JD c="bd732a,3" P2="645,222" P1="654,225" /><JD c="bd732a,3" P2="644,222" P1="650,216" /><JD c="bd732a,3" P2="646,222" P1="654,219" /><JD c="bd732a,5" P2="638,225" P1="636,221" /><JD c="bd732a,5" P2="640,222" P1="645,218" /><JD c="b1633f,4" P2="649,238" P1="648,234" /><JD c="b1633f,4" P2="655,237" P1="654,233" /><JD c="000000,2" P2="647,229" P1="644,230" /><JD c="000000,2" P2="653,228" P1="651,228" /><JD c="000000" P2="644,250" P1="640,246" /><JD c="000000" P2="602,142" P1="588,185" /><JD c="000000" P2="622,142" P1="634,178" /><JD c="e00f00,2" P2="584,218" P1="583,209" /><JPL c="e00f00,2" P2="585,193" P4="583,191" P3="580,191" P1="577,193" /><JPL c="e00f00,2" P2="584,200" P4="586,198" P3="586,195" P1="585,193" /><JPL c="e00f00,2" P2="584,200" P4="584,200" P3="581,201" P1="584,200" /><JD c="e00f00,2" P2="589,199" P1="588,190" /><JD c="e00f00,2" P2="615,186" P1="619,185" /><JD c="e00f00,2" P2="589,199" P1="593,198" /><JD c="e00f00,2" P2="594,198" P1="593,189" /><JD c="e00f00,2" P2="605,188" P1="606,197" /><JD c="e00f00,2" P2="605,188" P1="613,196" /><JD c="e00f00,2" P2="613,196" P1="612,187" /><JD c="e00f00,2" P2="616,195" P1="615,186" /><JD c="e00f00,2" P2="621,194" P1="620,185" /><JD c="e00f00,2" P2="588,190" P1="592,189" /><JD c="e00f00,2" P2="616,195" P1="621,194" /><JD c="e00f00,2" P2="629,183" P1="623,184" /><JD c="e00f00,2" P2="626,184" P1="627,193" /><JD c="e00f00,2" P2="581,201" P1="580,192" /><JPL c="e00f00,2" P2="638,200" P4="636,199" P3="634,199" P1="632,200" /><JPL c="e00f00,2" P2="638,205" P4="639,204" P3="639,202" P1="638,200" /><JPL c="e00f00,2" P2="638,205" P4="638,205" P3="634,206" P1="638,205" /><JD c="e00f00,2" P2="593,207" P1="593,218" /><JD c="e00f00,2" P2="597,206" P1="602,205" /><JD c="e00f00,2" P2="597,206" P1="597,211" /><JD c="e00f00,2" P2="597,211" P1="602,210" /><JD c="e00f00,2" P2="602,216" P1="597,217" /><JD c="e00f00,2" P2="602,216" P1="602,210" /><JD c="e00f00,2" P2="612,204" P1="606,205" /><JD c="e00f00,2" P2="609,205" P1="610,216" /><JD c="e00f00,2" P2="617,214" P1="615,203" /><JD c="e00f00,2" P2="617,214" P1="622,213" /><JD c="e00f00,2" P2="622,213" P1="620,202" /><JD c="e00f00,2" P2="624,201" P1="626,213" /><JD c="e00f00,2" P2="624,201" P1="628,200" /><JD c="e00f00,2" P2="628,200" P1="629,205" /><JD c="e00f00,2" P2="626,207" P1="629,205" /><JD c="e00f00,2" P2="626,207" P1="631,212" /><JD c="e00f00,2" P2="634,212" P1="633,200" /><JPL c="e00f00,2" P2="589,210" P4="587,208" P3="585,208" P1="581,209" /><JPL c="e00f00,2" P2="587,218" P4="589,215" P3="590,212" P1="589,210" /><JPL c="e00f00,2" P2="587,218" P4="587,218" P3="583,219" P1="587,218" /><JPL c="e00f00,2" P2="638,207" P4="637,206" P3="635,206" P1="634,206" /><JPL c="e00f00,2" P2="638,211" P4="640,210" P3="640,209" P1="638,207" /><JPL c="e00f00,2" P2="638,211" P4="638,211" P3="635,212" P1="638,211" /><JD c="e00f00,2" P2="615,204" P1="615,203" /><JD c="e00f00,2" P2="615,204" P1="615,203" /><JD c="291200,20" M2="4" P2="106,309" M1="4" P1="236,309" /><JD c="c27400,20" M2="4" P2="106,310" M1="4" P1="106,309" /><JD c="c27400,20" M2="4" P2="127,310" M1="4" P1="127,309" /><JD c="331701,20" M2="3" P2="93,329" M1="3" P1="235,329" /><JD c="c27400,20" M2="3" P2="93,330" M1="3" P1="93,329" /><JD c="c27400,20" M2="3" P2="114,330" M1="3" P1="114,329" /><JD c="c27400,20" M2="3" P2="135,330" M1="3" P1="135,329" /><JD c="331701,20" M2="2" P2="123,289" M1="2" P1="236,290" /><JD c="c27400,20" M2="2" P2="123,290" M1="2" P1="123,289" /><L /></L></Z></C>'

let parser = new DOMParser
let doc = parser.parseFromString(xml, 'text/xml')
console.log(doc)
let table = document.querySelector('.table')

class EditorElementList {
  constructor() {this.list = []}
  get(regexp) {
    let tree = []
    for (let el of this.list) {
      while(tree.length > el.level) tree.pop()
      tree.push(el.name)
      if (regexp.test(tree.join('>'))) return el
    }
  }
  getAll(regexp) {
    let out = new EditorElementList
    let tree = []
    for (let el of this.list) {
      while(tree.length > el.level) tree.pop()
      tree.push(el.name)
      if (regexp.test(tree.join('>'))) out.append(el)
    }
    return out
  }
  append(...e) {
    for (let el of e)
      if (el instanceof EditorElement) this.list.push(el)
  }
  *[Symbol.iterator]() {
    for (let el of this.list)
      yield el
  }
}

class EditorElement {
  constructor(name) {
    this.name = name
    this.attr = new Map
    this.isSelected = false
    this.level = 0

    // xml tree
    this.tree = {
      row: document.createElement('div'),
      cell1: document.createElement('div'),
      cell2: document.createElement('input'),
      cell3: document.createElement('div'),
      cell4: document.createElement('div')
    }

    // row
    this.tree.row.classList.add('tr')

    // hidden cell
    this.tree.cell1.classList.add('a')

    // name
    this.tree.cell2.setAttribute('type', 'text')
    this.tree.cell2.classList.add('a')
    this.tree.cell2.placeholder = this.name
    this.tree.cell2.style.width = '200px'

    // attributes
    this.tree.cell3.classList.add('a')

    // del button
    this.tree.cell4.classList.add('a', 'del')
    this.tree.cell4.textContent = '×'
    this.tree.cell4.title = 'Click to remove'

    // append children
    this.tree.row.appendChild(this.tree.cell1)
    this.tree.row.appendChild(this.tree.cell2)
    this.tree.row.appendChild(this.tree.cell3)
    this.tree.row.appendChild(this.tree.cell4)
    this.onUpdate()
  }
  onUpdate() {
    this.tree.cell1.textContent = this.level
    this.tree.cell2.value = this.name
    this.tree.cell2.style.paddingLeft = `${5 + this.level * 15}px`
    this.tree.cell3.textContent = [...this.attr.entries()].map(attr => `${attr[0]}="${attr[1]}"`).join(', ') || '[empty]'
  }
  getTreeElement() {return this.tree.row}
  setLevel(level) {this.level = level; this.onUpdate()}
  setName(name) {
    if (/^[:a-z_][:a-z_\-.]*$/i.test(name)) {
      this.name = name
      this.onUpdate()
    } else
      throw 'Invalid name'
  }
  // value = /^[^<&"]*$/
  setTag(name, value) {this.attr.set(name, value); this.onUpdate()}
  setTags(tags) {this.onUpdate()}
  getTag(name) {return this.attr.get(name)}
  delTag(name) {this.attr.delete(name); this.onUpdate()}
  hasTag(name) {return this.attr.has(name)}
  clearTags() {this.attr.clear(); this.onUpdate()}
  toString() {
    if (this.children.length)
      return `<${this.name}>${this.children}</${this.name}>`
    else
      return `<${this.name}/>`
  }
}

let list = new EditorElementList
function node2list(node, i = 0) {
  let el = new EditorElement(node.nodeName)
  el.setLevel(i)
  for (let {name, value} of node.attributes)
    el.setTag(name, value)
  list.append(el)
  table.appendChild(el.getTreeElement())
  for (let child of node.children)
    node2list(child, i + 1)
}

node2list(doc.activeElement)


console.log(new EditorElement(doc.activeElement))
